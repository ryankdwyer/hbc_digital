{"version":3,"sources":["gameLogic.controller.js"],"names":[],"mappings":"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","file":"gameLogic.controller-compiled.js","sourcesContent":["'use strict';\napp.controller('GameLogicCtrl', function($scope, GameState) {\n  $scope.cards = GameState.getCardsLeft();\n  $scope.dieValues = GameState.getDieValues();\n  $scope.message = `Welcome to Shut the Box. Click 'Start Game' to begin.`;\n  $scope.gameStarted = GameState.getGameState();\n\n  $scope.cardsToRemove = [];\n\n  $scope.roll = () => {\n    GameState.gameStarted = true;\n    $scope.gameStarted = GameState.getGameState();\n    clearMessage();\n    $scope.dieValues.one = Math.floor(Math.random() * ((6 - 1) + 1) + 1);\n    if ($scope.cards[0] !== 1 || $scope.cards.length !== 1) {\n      $scope.dieValues.two = Math.floor(Math.random() * ((6 - 1) + 1) + 1);\n    } else {\n      $scope.dieValues.two = 0;\n    }\n    GameState.dieValues = $scope.dieValues;\n    if (isGameOver()) {\n      $scope.message = `I'm sorry, you're out of turns!`;\n    } else {\n      $scope.message = `Pick a set of cards that sums to the total of your die roll.`;\n    }\n  };\n\n  $scope.toggleCardRemoval = (event, idx) => {\n    clearMessage();\n    let cardElement = angular.element(event.target);\n    if (cardElement.hasClass('translucent')) {\n      cardElement.removeClass('translucent');\n      $scope.cardsToRemove = $scope.cardsToRemove.filter(function(card) {\n        return card !== idx + 1;\n      })\n    } else {\n      if(validChoice(idx + 1)) {\n        cardElement.addClass('translucent');\n        $scope.cardsToRemove.push(idx + 1);\n      }\n    }\n  };\n\n  $scope.removeCards = () => {\n    let total = $scope.dieValues.one + $scope.dieValues.two;\n    if (sum($scope.cardsToRemove) === total) {\n      GameState.removeCards($scope.cardsToRemove);\n      $scope.reset();\n      $scope.roll();\n    } else {\n      $scope.message = 'That is not a valid combination. Please pick a different set.';\n    }\n  };\n\n  let validChoice = (card) => {\n    let total = $scope.dieValues.one + $scope.dieValues.two;\n    if (card > total || card + sum($scope.cardsToRemove) > total) {\n      $scope.message = 'That is not a valid choice. Please pick another card.';\n      return false;\n    }\n    return true;\n  };\n\n  $scope.reset = () => {\n    clearMessage();\n    GameState.reset();\n    $scope.cardsToRemove = [];\n    $scope.dieValues.one = 0;\n    $scope.dieValues.two = 0;\n  };\n\n  let sum = (arr) => {\n    return arr.reduce(function(prev, next) {\n      return prev + next;\n    },0)\n  };\n\n  let clearMessage = () => {\n    $scope.message = '';\n  };\n\n  let isGameOver = () => {\n    GameState.buildValidCards();\n    let choices = GameState.getValidChoices();\n    return choices.length === 0;\n  }\n});"]}