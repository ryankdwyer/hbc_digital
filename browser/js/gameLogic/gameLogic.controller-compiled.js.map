{"version":3,"sources":["gameLogic.controller.js"],"names":[],"mappings":"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","file":"gameLogic.controller-compiled.js","sourcesContent":["'use strict';\napp.controller('GameLogicCtrl', function($scope, GameState) {\n  $scope.cards = GameState.getCardsLeft();\n  $scope.dieValues = GameState.getDieValues();\n  $scope.message = `Welcome to Shut the Box. Click 'Start Game' to begin.`;\n  $scope.gameStarted = GameState.getGameState();\n  $scope.cardsToRemove = {};\n\n  $scope.startTurn = () => {\n    GameState.gameStarted = true;\n    $scope.gameStarted = GameState.getGameState();\n    $scope.cards = GameState.getCardsLeft();\n    $scope.cardsToRemove = {};\n\n    clearMessage();\n    roll();\n\n    if (isGameOver()) {\n      $scope.message = `I'm sorry, you're out of turns!`;\n    } else {\n      $scope.message = `Pick a set of cards that sums to a total of ${$scope.dieValues.one + $scope.dieValues.two}.`;\n    }\n  };\n\n  $scope.toggleCardRemoval = (event, idx) => {\n    if ($scope.cardsToRemove[idx + 1]) {\n      $scope.cardsToRemove[idx + 1] = false;\n    } else {\n      if(validChoice(idx + 1)) {\n        $scope.cardsToRemove[idx + 1] = true;\n      }\n    }\n  };\n\n  $scope.removeCards = () => {\n    let total = $scope.dieValues.one + $scope.dieValues.two;\n    if (sum($scope.cardsToRemove) === total) {\n      GameState.removeCards($scope.cardsToRemove);\n      $scope.startTurn();\n    } else {\n      $scope.message = `That is not a valid combination. Please pick a different set.`;\n    }\n  };\n\n  $scope.reset = () => {\n    clearMessage();\n    GameState.reset();\n    $scope.cards = GameState.getCardsLeft();\n    $scope.dieValues = GameState.getDieValues();\n    $scope.gameStarted = GameState.getGameState();\n    $scope.message = `Welcome to Shut the Box. Click 'Start Game' to begin.`;\n    $scope.cardsToRemove = {};\n  };\n\n  let roll = () => {\n    $scope.dieValues.one = Math.floor(Math.random() * ((6 - 1) + 1) + 1);\n    if ($scope.cards[0] !== 1 || $scope.cards.length !== 1) {\n      $scope.dieValues.two = Math.floor(Math.random() * ((6 - 1) + 1) + 1);\n    } else {\n      $scope.dieValues.two = 0;\n    }\n    GameState.dieValues = $scope.dieValues;\n  };\n\n  let validChoice = (card) => {\n    let total = $scope.dieValues.one + $scope.dieValues.two;\n    if (card + sum($scope.cardsToRemove) > total) {\n      console.log(card, sum($scope.cardsToRemove), total);\n      $scope.message = `That is not a valid choice. Please pick another card.`;\n      return false;\n    }\n    return true;\n  };\n\n  let sum = (obj) => {\n    let count = 0;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key]) count += Number(key);\n    }\n    return count;\n  };\n\n  let clearMessage = () => {\n    $scope.message = '';\n  };\n\n  let isGameOver = () => {\n    GameState.buildValidCards();\n    let choices = GameState.getValidChoices();\n    return choices.length === 0;\n  }\n});\n"]}